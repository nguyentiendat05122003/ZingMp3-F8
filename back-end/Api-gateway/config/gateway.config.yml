http:
  port: 8090
apiEndpoints:
  countFollow:
    paths:
      - "/follow/:followId"
  getSong:
    paths:
      - "/song"
  getTypeSong:
    paths:
      - "/typeSong"
  getSongFollowArtist:
    paths:
      - "/song/artist/*"
  getArtist:
    paths:
      - "/user/getArtist"
  getSongVietNam:
    paths:
      - "/song/vietnam"
  getSongOtherCountry:
    paths:
      - "/song/otherCountry"
  addSong:
    paths:
      - "/song/add"
  user:
    paths:
      - "/user/*"
  admin:
    paths:
      - "/admin/*"
  auth:
    paths:
      - "/auth/*"
serviceEndpoints:
  userService:
    url: "http://127.0.0.1:3002"
  userCustom:
    url: "http://127.0.0.1:3002/user"
  adminService:
    url: "http://127.0.0.1:3001"
  authService:
    url: "http://127.0.0.1:3003"
policies:
  - proxy
  - cors
  - jwt
  - verify-token
  - verifyArtist-token
  - verifyAdmin-token
pipelines:
  getSong:
    apiEndpoints:
      - getSong
    policies:
      - cors:
      - proxy:
          - action:
              serviceEndpoint: userService
  countFollow:
    apiEndpoints:
      - countFollow
    policies:
      - cors:
      - proxy:
          - action:
              serviceEndpoint: userService
  getTypeSong:
    apiEndpoints:
      - getTypeSong
    policies:
      - cors:
      - proxy:
          - action:
              serviceEndpoint: userService

  getSongFollowArtist:
    apiEndpoints:
      - getSongFollowArtist
    policies:
      - cors:
      - proxy:
          - action:
              serviceEndpoint: userService
  getArtist:
    apiEndpoints:
      - getArtist
    policies:
      - cors:
      - proxy:
          - action:
              serviceEndpoint: userService
  getSongVietNam:
    apiEndpoints:
      - getSongVietNam
    policies:
      - cors:
      - proxy:
          - action:
              serviceEndpoint: userService
  getSongOtherCountry:
    apiEndpoints:
      - getSongOtherCountry
    policies:
      - cors:
      - proxy:
          - action:
              serviceEndpoint: userService
  addSong:
    apiEndpoints:
      - addSong
    policies:
      - verifyAdmin-token:
      - cors:
      - proxy:
          - action:
              serviceEndpoint: userService
  auth:
    apiEndpoints:
      - auth
    policies:
      - cors:
      - proxy:
          - action:
              serviceEndpoint: authService
  user:
    apiEndpoints:
      - user
    policies:
      - cors:
          - action:
              origin: "http://127.0.0.1:5501"
              methods: "HEAD,PUT,PATCH,POST,DELETE"
              allowedHeaders: "*"
      - verify-token:
      - proxy:
          - action:
              serviceEndpoint: userService
              prependPath: true
              ignorePath: false
              stripPath: true
  admin:
    apiEndpoints:
      - admin
    policies:
      - proxy:
          - action:
              serviceEndpoint: adminService
              prependPath: true
              ignorePath: false
              stripPath: true
